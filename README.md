# API для управления складом

Этот проект представляет собой REST API, разработанный с использованием FastAPI для управления процессами на складе. API позволяет управлять товарами, запасами и заказами. Он построен с использованием SQLAlchemy (версия 2) для взаимодействия с базой данных и придерживается принципов чистого кода и шаблонов проектирования для улучшения структуры и поддерживаемости кода.

## Функциональность

- **Управление товарами:**
  - Создание нового товара
  - Получение списка товаров
  - Получение подробной информации о товаре по ID
  - Обновление информации о товаре по ID
  - Удаление товара по ID
- **Управление заказами:**
  - Создание нового заказа
  - Получение списка заказов
  - Получение подробной информации о заказе по ID
  - Обновление статуса заказа
- **Бизнес-логика:**
  - Проверка наличия достаточного количества товара на складе при создании заказа
  - Автоматическое обновление количества товара на складе при создании заказа
  - Возврат ошибки в случае недостаточного количества товара для выполнения заказа

## Используемые технологии

- **FastAPI:** Для создания REST API
- **SQLAlchemy (v2):** Для взаимодействия с базой данных и ORM
- **PostgreSQL:** В качестве системы управления базами данных (в Docker)
- **Pytest:** Для тестирования функциональности API
- **Docker:** Для контейнеризации приложения и базы данных

## Структура базы данных

- **Товар (Product):**
  - `id` (UUID)
  - `name` (строка)
  - `desc` (строка)
  - `price` (число с плавающей точкой)
  - `quantity` (целое число)

- **Заказ (Order):**
  - `id` (UUID)
  - `created_at` (дата и время)
  - `status` (строка; например, "в процессе", "отправлен", "доставлен")

- **Элемент заказа (OrderItem):**
  - `id` (UUID)
  - `order_id` (внешний ключ на Заказ)
  - `product_id` (внешний ключ на Товар)
  - `quantity` (целое число)

## Эндпоинты API

### Товары
- `POST /products`: Создать новый товар
- `GET /products`: Получить список всех товаров
- `GET /products/{id}`: Получить детали товара по ID
- `PUT /products/{id}`: Обновить информацию о товаре по ID
- `DELETE /products/{id}`: Удалить товар по ID

### Заказы
- `POST /orders`: Создать новый заказ
- `GET /orders`: Получить список всех заказов
- `GET /orders/{id}`: Получить детали заказа по ID
- `PATCH /orders/{id}/status`: Обновить статус заказа

## Документация

API предоставляет встроенную документацию с использованием FastAPI (Swagger/OpenAPI), доступную по адресу `/docs`.

## Тестирование

Тесты написаны с использованием pytest для проверки основных функций API. Для запуска тестов выполните следующую команду:

```bash
pytest
